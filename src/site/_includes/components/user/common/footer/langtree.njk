<script>
document.addEventListener('DOMContentLoaded', e => {
  document.querySelectorAll('.etym-container').forEach(div => {
    const words = Array.from(div.querySelectorAll('*')).map(el => 
      el.tagName.toLowerCase().includes(':') ? el.textContent.trim() : null
    ).filter(Boolean);
    
    if (words.length < 2) return;
    
    const svg = document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('width','280');
    svg.setAttribute('height','120');
    svg.setAttribute('viewBox','0 0 280 120');
    div.appendChild(svg);
    
    const parents = words.slice(0,-1);
    const child = words.pop();
    
    // Monochrome mini Google style
    parents.forEach((w,i) => {
      const x = 40 + i*70;
      drawNode(svg, x, 25, w, false);
      drawLine(svg, x, 35, 140, 65);
    });
    
    drawNode(svg, 140, 75, child, true);
  });
});

function drawNode(svg, x, y, word, isChild) {
  // Grey circle
  const circ = document.createElementNS('http://www.w3.org/2000/svg','circle');
  circ.setAttribute('cx',x); circ.setAttribute('cy',y); 
  circ.setAttribute('r',isChild?4.5:3.5);
  circ.setAttribute('fill','#5f6368');
  svg.appendChild(circ);
  
  // Word text
  const txt = document.createElementNS('http://www.w3.org/2000/svg','text');
  txt.setAttribute('x',x); txt.setAttribute('y',isChild?y-12:y+12);
  txt.setAttribute('text-anchor','middle');
  txt.style.fontSize = '10px';
  txt.style.fill = '#202124';
  txt.textContent = word;
  svg.appendChild(txt);
}

function drawLine(svg, x1, y1, x2, y2) {
  const path = document.createElementNS('http://www.w3.org/2000/svg','path');
  path.setAttribute('d',`M${x1},${y1} Q${x1+10},${y1+20} ${x2},${y2}`);
  path.setAttribute('stroke','#dadce0');
  path.setAttribute('stroke-width','1.5');
  path.setAttribute('fill','none');
  svg.appendChild(path);
}
</script>